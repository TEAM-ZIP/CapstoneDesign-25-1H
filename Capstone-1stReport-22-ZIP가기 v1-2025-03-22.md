<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | 독립출판물만의 감성을 즐기는 사용자를 위한 <br> 독립 출판물이 있는 서점 탐색부터, 리뷰 기반 추천까지,<br> RAG를 기반으로 개인화된 독서 경험을 제공하는 서점ZIP
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 22 / ZIP가기 |
| (3) 팀 구성원 | 홍지형 (2276358): 리더, 프로젝트 관리, 데이터모델링, AI 구현, 백엔드 API 개발 <br> 강다형 (2276002): 팀원, 요구사항 분석, 임베딩 및 3D 모델링, 프론트엔드 UI 개발, 배포테스트 <br> 소현아 (2171021) : 팀원, 팀 커뮤니케이션, 데이터 모델링, AI 구현, 백엔드 API 개발, 배포 테스트			 |
| (4) 팀 지도교수 | 심재형 교수님 |
| (5) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | RAG, 챗봇, LLM, 책, 독서광, 독립서점  |
| (7) 과제 내용 요약 | 개인만의 특성을 드러내는 독립출판물의 감성을 즐기는 사용자가 독립출판물을 더 잘 찾아낼 수 있도록, 독립출판물을 비치한 서점에 대한 위치, 키워드, 운영시간 등의 정보와 도서출판전산망에 등록되지 않은 독립출판물 리뷰 제공 및 추천 시스템을 제공합니다. |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | *본 과제를 통하여 해결/완화하고자하는 문제에 대하여 기술. Target Customer 정의와 해결해야 할 문제점들(pain points)대한 내용 기술*  |
| (2) 기존연구와의 비교 | *유사한 과제/연구/서비스/시스템의 예를 들고, 각각의 장단점을 기술할 것. 특히, 본 과제가 유사과제에 대하여 갖는 장점을 부각할 것* |
| (3) 제안 내용 | *본 프로젝트에서 제시한 문제를 해결하기 위해 새롭제 제안하는 해결책 or 해결책들에 대하여 기술 .* |
| (4) 기대효과 및 의의 | *프로젝트의 결과물을 통하여 얻을 수 있는 기대효과 및 의의에 대하여 기술 .* |
| (5) 주요 기능 리스트 | *(3)에서 제안한 해결책들을 지원or구현하기 위하여 필요한 주요 기능 혹은 기능을을 List-up하고, <br> 각각에 대하여 설명* <br> * 본 항목의 내용을 충실히 기재 바람니다. *|

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | **1. 기능별 상세 요구사항**<br><br> ![image](https://github.com/user-attachments/assets/fe1972fb-920e-4e55-aec0-43907a00f4e5) ![image](https://github.com/user-attachments/assets/5ba41de1-97c7-4042-92e2-1a60a17d74b7) ![image](https://github.com/user-attachments/assets/da043fcf-4648-429e-a97a-4761d7857934) ![image](https://github.com/user-attachments/assets/b9cd1dc4-5743-4c4f-a5c8-4d411fac69c1) <br> **2. Sequence Diagram** ![image](https://github.com/user-attachments/assets/a2321cdf-8394-4d52-a3e1-2dde4471a5ed) **3. ER 다이어그램** ![image](https://github.com/user-attachments/assets/fdeb277a-44fc-4c9f-ba2a-63b37e108b5f) |
| (2) 전체 시스템 구성 | ![image](https://github.com/user-attachments/assets/234a257c-3f1c-4816-a2c5-6ad203e98362) <br> **📖 구성 요소**<br> - 사용자 : 웹/모바일에서 서점ZIP 접근<br> - 프론트엔드 : React 기반 웹 어플리케이션으로 TypeScript를 통해 개발. 주요 기능 동작화면은 서점 탐색을 위한 지도화면, 도서 리뷰 확인 및 등록을 위한 화면, 도서추천 챗봇 부키와 대화방 화면이 있음. <br> - 백엔드 API 서버 : Spring boot를 이용하여 AWS EC2 인스턴스에서 실행됨. 서점탐색을 위한 서점 정보 전달, 서점 제보, 도서 리뷰 작성 및 보기, openAI의 chatGPT-4o모델과 연결하여 부키 대화 저장 등의 REST API를 제공함<br> - 데이터베이스 : MySQL(사용자, 서점, 책, 리뷰 데이터 저장), chromaDB(책 추천 관련된 벡터 저장), Redis(팩 리뷰 좋아요 순 정렬 순위 저장 및 사용자의 서점 찜하기 수 저장)<br>- 외부서비스 : AWS S3, EC2(무중단서버 가동), Route53(도메인  관리), OpenAI API(RAG 챗봇 구성), kakao(로그인, 도서 검색 api, 지도 api), cloudinary(독립출판물 표지 이미지 업로드 클라우드 서비스) <br><br>**📕 주요 SW 모듈 및 역할**<br> - 회원관리 모듈 : Spring Security를 이용한 JWT 기반 로그인 / 회원가입 <br> - 서점 탐색 모듈 : 사용자가 독립서점 검색 및 상세 정보 조회 <br>- 도서 검색/리뷰 모듈: 일반 도서 및 독립출판물 검색 및 리뷰 확인/저장<br>- RAG 기반 챗봇 모듈: 사용자의 책 취향을 분석하여 추천 |
| (3) 주요엔진 및 기능 설계 | **RAG 기반 챗봇 모듈**<br><br>1. MySQL에 저장한 데이터 임베딩<br>- sentence transformer를 통해 MySQL에 저장된 책 이름, 책 내용, 작가 등의 책 데이터와 유저가 좋아요한 책, 검색 기록, 찜한 책 등의 유저 히스토리 데이터를 임베딩 데이터로 구성<br>2. 임베딩한 데이터를 벡터 DB에 저장<br>- 임베딩한 데이터를 chromaDB에 저장하여 검색할 수 있게 함.<br>3. 책 추천 알고리즘<br>- 사용자의 책 추천 요청을 GPT-4o를 통해 자연어로 입력받고, 해당 요청과 가장 유사한 벡터를 ChromaDB에서 검색하여 추천 후보군을 구성. 이후 관련도 높은 책들을 선별하고 자연어 기반 후처리를 거쳐 최종 추천 리스트를 제공.<br><br> **도서 검색/리뷰 모듈**<br><br>- 사용자로부터 도서명, 작가명을 통해 도서 검색을 프론트엔드 상에서 요청하면 백엔드에서 KAKAO API나 MySQL에 저장된 책 데이터를 전달함<br>- 사용자가 검색한 책 데이터를 전달하고 책에 대한 별점, 리뷰 텍스트 등을 입력하여 화면 상에서 등록을 하면 프론트엔드에서 백엔드로 해당 리뷰 내용을 보내어 MySQL에 저장함. |
| (4) 주요 기능의 구현 | **북스냅 기능(사용자 리뷰 기반 독립출판물 데이터 구축)**<br>- 해당 기능은 다시 2개로 나누어짐<br><br>- 1. 좋아요순/인기있는 순/최신순을 선택하여 리뷰를 보는 기능<br>-리뷰를 보는 기능에서는 사용자가 정렬 중 하나를 선택하면 (1) 프론트엔드에서 해당 정보를 백엔드로 전달하고 (2) Redis의 `ZSet`에 저장되어 있는 순위로 리뷰를 정렬하여 (3) Pageable을 이용하여 순위가 높은 10개 단위로 책 리뷰 데이터를 전달하는 흐름으로 구현됨.<br><br>- 2. 책 리뷰를 등록하는 기능<br>-해당 기능은 3가지 상황으로 나누어서 진행됨-<br>(1) isbn이 존재하는 도서에 대한 리뷰 등록<br>- 사용자가 책 검색을 하면 해당 검색어를 프론트엔드에서 백엔드로 넘겨 kakao api에서 검색어 대한 도서검색을 진행한 결과를 JSON 형태로 보내주고 사용자는 이 데이터를 보고 책을 선택하여 별점, 리뷰 텍스트를 화면에서 등록하여 프론트엔드에 보내줌.<br>- 백엔드에서는 이 리뷰 데이터를 `book_review`테이블에 저장하는 방식으로 진행됨.<br>(2) isbn이 존재하지 않는 독립출판물이지만 이전에 책 리뷰가 등록되어 있는 경우<br>- 책 검색 과정에서 kakao api 사용하지 않고 MySQL에서 데이터를 검색하는 부분을 제외하고 (1)과 동일함.<br>(3) isbn이 존재하지 않는 독립출판물이고 이전에 책 리뷰가 없는 경우<br>-책 검색 과정이 없고 사용자로부터 책 표지, 해당 책을 발견한 독립서점 목록, 도서명, 작가, 별점, 리뷰 내용을 입력을 등록하게 한 후 프론트엔드에서 백엔드로 이러한 내용을 이미지는 multipart data로 보내고 나머지는 json으로 보냄.<br>- 백엔드에서는 책 표지 데이터는 cloudinary api를 이용하여 클라우드에 해당 이미지를 저장하고 이미지가 저장된 url을 받아 책 테이블에 저장하고 리뷰 관련 데이터는 책 리뷰 테이블에 저장함<br><br> **서점 ZIP가기 기능 (지도 기반 서점 탐색**<br>- 사용자가 독립서점을 검색하거나 해당 위치 표시를 화면상에서 누르게 되면 프론트엔드에서는 해당 위치 정보나 독립서점 검색어를 백엔드에 보내주고 백엔드에서 거리계산 알고리즘을 활용하여 MySQL에서 찾은 독립서점 데이터를 프론트엔드로 보내줌<br>- 사용자가 독립서점 목록 중 하나를 선택하면 프론트엔드에서 백엔드로 독립서점에 대한 상세 정보를 요청하고 백엔드에서 서점별 보유도서, 운영 시간, 관련 키워드, 리뷰를 응답하여 사용자가 서점에 관한 다양한 정보를 확인할 수 있음<br><br> **Bookie 챗봇 추천 기능(RAG 기반 독립출판물 추천))**<br>-기존에 저장되어 있던 MySQL내 독립서점 데이터와 책 찜하기, 좋아요 등의 유저 히스토리 정보, 리뷰로 저장된 책에 관한 내용을 결합하여 sentence-transformer를 통해 의미 분석하는 과정을 거치고 이를 벡터 DB인 chromaDB에 벡터로 저장함. LLM으로는 OpenAI사 chatGPT-4o를 사용하고 프론트엔드, 백엔드를 거쳐 책 추천을 원하는 사용자가 자연어로 요청을 보내오면, 사용자의 요청에 따라 chromaDB 내에서 유사도를 분석하여 관련성 있는 문서를 검색함.<br>- 검색된 문서를 기반으로 자연스러운 형태로 변환하여 백엔드로 다시 내고 해당 대화 내용을 부키와의 대화 테이블에 저장하여 추후에 chromaDB에 다시 저장하여 유사도를 점차 늘려가는 방식으로 진행됨.<br>- 추천된 책은 backend에서 json형태로 변환하여 프론트엔드에 전달함. |
| (5) 기타 | |

<br>
