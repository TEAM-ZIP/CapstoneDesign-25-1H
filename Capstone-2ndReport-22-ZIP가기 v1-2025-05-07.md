<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | 독립출판물만의 감성을 즐기는 사용자를 위한 <br> 독립 출판물이 있는 서점 탐색부터, 리뷰 기반 추천까지,<br> RAG를 기반으로 개인화된 독서 경험을 제공하는 서점ZIP
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 22 / ZIP가기 |
| (3) 팀 구성원 | 홍지형 (2276358): 리더, 프로젝트 관리, 데이터모델링, AI 구현, 백엔드 API 개발 <br> 강다형 (2276002): 팀원, 요구사항 분석, 임베딩 및 3D 모델링, 프론트엔드 UI 개발, 배포테스트 <br> 소현아 (2171021) : 팀원, 팀 커뮤니케이션, 데이터 모델링, AI 구현, 백엔드 API 개발, 배포 테스트			 |
| (4) 팀 지도교수 | 심재형 교수님 |
| (5) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | RAG, 챗봇, LLM, 책, 독서광, 독립서점  |
| (7) 과제 내용 요약 | 개인만의 특성을 드러내는 독립출판물의 감성을 즐기는 사용자가 독립출판물을 더 잘 찾아낼 수 있도록, 독립출판물을 비치한 서점에 대한 위치, 키워드, 운영시간 등의 정보와 도서출판전산망에 등록되지 않은 독립출판물 리뷰 제공 및 추천 시스템을 제공합니다. |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | **Target Customer** :<p>- 기존의 대형 서점에서 찾기 어려운 독립출판물을 선호하는 독자층<br> - 개성있는 독립서점을 선호하며 서점의 분위기, 공간을 즐기는 사용자<br> - 자신의 선호도를 기반으로 맞춤형 서점과 책 추천을 받고 싶은 사용자 <br><br> **Pain Points** : <p>1. 독립 출판물에 대한 정보 접근성 부족 <p>독립 출판물은 온라인에서의 정보가 제한적이며, 이를 종합적으로 검색할 수 있는 중앙화된 검색 플랫폼이 부족함. 사용자는 원하는 출판물을 찾기 위해 블로그, SNS, 커뮤니티 등 여러 플랫폼을 전전해야하는 번거로움이 있음. <p>2. 서점과 독립 출판물 간의 정보 단절 <p>독립 출판물과 서점의 정보가 유기적으로 연결되어 있지 않으며, 특정 서점에서 판매 중인 독립 출판물을 확인할 수 있는 방법이 제한적임.  <p>3. 사용자 맞춤형 큐레이션의 부재 <p>독립 출판물에 대한 체계적인 큐레이션 서비스가 부족하여, 사용자가 자신의 취향에 맞는 출판물을 쉽게 발견하기 어려움. 이로 인해 정보 탐색 과정에서 피로감이 증가하고 원하는 콘텐츠를 찾는 데 과도한 시간과 노력이 소요됨.  |
| (2) 기존연구와의 비교 |**[동네서점] 서비스와의 비교** <p>동네서점 웹 서비스는 독립서점을 지도에서 확인할 수 있다는 점에서 <서점ZIP> 서비스와 유사하지만, 다음과 같은 단점을 갖고 있음. <br>1. 서점 데이터 불러오는 속도가 느림<br> <img src="https://i.ibb.co/YFYNCYNp/2025-03-27-160119.png" width=30% /><br>- [동네서점]은 지도에서 독립서점을 로드할 때, 새로고침할 때마다 약 2초의 로딩 시간이 발생하여 사용자 경험이 저하됨. <br> - 반면 <서점ZIP>은 현재 약 40ms이내에 서점리스트를 불러올 수 있으며, 이후 성능 최적화를 통해 더욱 빠른 응답 속도를 제공할 계획임. <br> <br>2.  모바일 UI의 불편함 <p><img src="https://i.ibb.co/9kMMZmL8/image.png" width=30%/> <br>- 동네서점의 모바일 환경에서는 지도의 크기가 작아 서점의 위치를 직관적으로 파악하기 어려움. <br><img src="https://i.ibb.co/wrMPNyLS/image.png" width=30% /> <br>- <서점ZIP>은 바텀시트 UI를 적용하여 모바일 상에서도 더 넓은 지도 화면을 제공하고, 서점 목록과 지도를 동시에 확인할 수 있도록 하여 가독성을 높임.  <br> <br>3. 독립출판물 정보 제공 부족 <p>- [동네서점]은 독립서점의 위치등의 정보만 제공할 뿐, 독립출판물과 관련된 정보는 포함하지 않음. <p><img src="https://i.ibb.co/TD53gYS9/image.png" width=30% /> <br>- <서점ZIP>은 각 독립 서점이 보유한 독립출판물 목록 및 독립출판물에 대한 사용자 리뷰를 함께 제공하여, 사용자가 원하는 독립출판물을 쉽게 찾을 수 있도록 돕습니다. <br> <p>**[밀리의 서재] 서비스와의 비교** <br>밀리의 서재 앱은 도서에 대한 사용자의 리뷰 및 도서 추천 기능을 제공한다는 점에서 <서점ZIP> 서비스와 유사하지만, 다음과 같은 점이 있습니다. <br> <p>1. 독립출판물 리뷰 미제공 <p>- [밀리의 서재]는 도서출판전산망에 등록된, 밀리와 제휴를 맺은 e-book에 한하여 사용자 리뷰를 등록하므로 독립출판물에 대한 리뷰를 확인할 수 없습니다. <br>- <서점ZIP>은 도서출판전산망에 등록된 책뿐만 아니라 사용자가 직접 등록한 독립출판물에 대한 리뷰도 제공하여 독립출판물에 특화된 서비스를 제공합니다. <br> <br>2. 독립출판물 및 독립서점에 대한 추천 기능 부재 <br>- [밀리의 서재]는 서점 및 독립출판물을 다루지 않는 서비스이므로, 독립출판물과 독립서점에 대한 추천 기능이 없습니다. <br>- <서점ZIP>은 사용자 데이터를 기반으로 독립서점 및 독립출판물을 추천하여, 사용자 맞춤형 탐색 경험을 제공합니다. |
| (3) 제안 내용 | 1. 독립 출판물과 서점 정보를 통합한 탐색 플랫폼 구축 <p> 흩어져 있는 독립 출판물 및 서점 정보를 하나의 플랫폼에서 종합적으로 탐색할 수 있도록 통합 데이터베이스를 구축합니다. <br> 2. 서점-출판물 간 상호 연결 구조 설계 <p> 사용자가 출판물 기준으로 해당 서점을 찾거나, 서점 기준으로 보유 출판물을 확인할 수 있도록 양방향 탐색 시스템을 구현합니다. <br> 3. RAG(Retrieval-Augmented Generation) 기반 개인화 추천 시스템 도입 <p> 사용자의 검색 기록, 방문 기록, 리뷰 데이터를 분석하여 개인 취향에 맞는 독립 출판물 및 서점을 추천하는 AI 기반 큐레이션 기능을 제공합니다.  |
| (4) 기대효과 및 의의 | 1. 독립 출판물과 서점에 대한 접근성 향상 <p>- 사용자는 더 이상 블로그,SNS,커뮤니티 등에서 개별적으로 정보를 찾아다닐 필요없이, 하나의 플랫폼에서 통합된 데이터를 효율적으로 탐색할 수 있습니다.<p>- 이를 통해 독립 출판물과 서점에 대한 접근성이 대폭 개선되며, 탐색 과정에서의 불편함이 해소됩니다.<p>2. 개인화 큐레이션을 통한 사용자 경험 개선<p>- RAG 기반의 추천 시스템을 통해 사용자의 관심사와 취향에 맞는 독립 출판물 및 서점을 추천합니다.<p>- 이를 통해 정보 탐색에 소요되는 시간을 줄이고, 사용자 만족도를 높이며, 보다 직관적인 탐색 경험을 제공합니다. <p>3. 독립 출판 시장의 활성화에 기여<p>- 사용자와 서점, 출판물 간의 연결 고리를 강화하여 독립 출판물의 유통과 소비를 촉진합니다.<p>- 독립 서점의 온라인 가시성이 증가하고 출판물 판매 기회가 확대됨으로써 독립 출판 생태계가 더욱 활성화될 수 있는 기반을 마련합니다. |
| (5) 주요 기능 리스트 | 📌 서점ZIP이 제시하는 핵심 기능<br><p> 1. 북스냅 기능 (사용자 리뷰 기반 독립출판물 데이터 구축)<p> - 사용자가 직접 독립출판물에 대한 리뷰를 등록 (책 제목, 작가, 평점, 서점 사진 등)<p> - 사용자 참여 기반 데이터를 구축하여 독립출판물 정보를 확보<p> - 축적된 리뷰 데이터를 활용하여 추천 시스템 학습 데이터로 활용 가능<br><p> 2. 서점 ZIP가기 기능 (지도 기반 서점 탐색)<p> - 사용자의 현재 위치 또는 검색 위치를 기준으로 주변 독립서점을 지도에서 시각화 <p> - Kakao 지도 API 및 거리 계산 알고리즘을 활용하여 위치 기반 필터링, 태그 기반 분류 지원<p> - 서점별 보유 도서, 운영 시간, 태그 정보 등 상세 정보 제공<br><p> 3. Bookie 챗봇 추천 기능 (RAG 기반 독립출판물 추천)<p> - LLM + Vector DB를 활용한 RAG 기반 AI 추천 시스템<p> - 사용자 리뷰, 검색, 찜 목록 등의 활동 데이터를 바탕으로 개인화된 독립출판물 추천 <p> - 챗봇 인터페이스를 통해 직관적인 추천 경험 제공<br>---<br>📍 추가 기능 리스트<br><p> 4. 서점 검색 기능<p> - 서점명 또는 키워드를 통한 검색 기능<p> - 위치 기반 정렬(가까운 순), 인기 순 정렬 제공<br><p> 5. 양방향 탐색 기능 (출판물 ↔ 서점)<p> - 출판물 상세 페이지에서 해당 도서를 판매하는 서점 목록 확인 가능<p> - 서점 상세 페이지에서 보 유중인 출판물 리스트 제공<br><p> 6. 찜 및 리뷰 기능<br> - 서점 및 출판물에 대한 '찜하기' 및 '리뷰 작성' 기능 제공<p> - 사용자 기반 인기 콘텐츠 집계 및 개인화 추천에 활용<br><br> 7. 사용자 제보 기능 (서점, 출판물 등록 및 수정 제보)<p> - 사용자가 직접 독립서점/출판물을 제보할 수 있는 기능<p> - 사진, 위치, 설명 등 세부 정보 입력 가능<p> - 잘못된 정보 신고 기능 포함<p> - 운영자 검수를 거쳐 데이터베이스에 반영되어 지속적 확장 가능|<br><br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | 기능별 상세 요구사항에서는 표를 모든 기능을 정리하고 시퀀스 다이어그램은 주요 기능으로 흐름을 정리한 후, ER 다이어그램에서는 데이터베이스 상에서 데이터가 어떤 형태로 설계되어 있는지를 보여줌에 따라 서점ZIP 서비스의 요구사항을 확실히 정의하고자 한다.<br><br>**1. 기능별 상세 요구사항**<br><br> ![image](https://github.com/user-attachments/assets/fe1972fb-920e-4e55-aec0-43907a00f4e5) ![image](https://github.com/user-attachments/assets/5ba41de1-97c7-4042-92e2-1a60a17d74b7) ![image](https://github.com/user-attachments/assets/da043fcf-4648-429e-a97a-4761d7857934) ![image](https://github.com/user-attachments/assets/b9cd1dc4-5743-4c4f-a5c8-4d411fac69c1) <br> **2. Sequence Diagram** ![image](https://github.com/user-attachments/assets/124e799e-b611-4a98-aafb-06c4d365a20f)<br><br>** 1: 서점ZIP가기 - 독립서점 목록 조회**<br>설명: 사용자가 독립서점 목록을 조회하는 흐름을 나타냅니다.<br>주요 흐름:<br>사용자가 독립서점 목록 요청 → 백엔드로 전송<br>백엔드가 MySQL에 독립서점 리스트를 요청<br>응답 받은 서점 목록을 클라이언트에 전달<br>![image](https://github.com/user-attachments/assets/897a2aea-6ae1-4df7-ab47-6b58f0383d5f)<br>**2: 서점ZIP가기 - 독립서점에 보유한 독립 출판물 확인**<br><br>설명: 특정 서점이 어떤 독립서적을 보유하고 있는지를 확인하는 흐름입니다.<br>주요 흐름:<br>사용자 → 서점 상세 정보 요청<br>백엔드가 해당 서점의 독립서적 리스트를 DB에서 조회<br>서점 정보와 함께 보유 독립서적 목록을 클라이언트에 반환<br><br>![image](https://github.com/user-attachments/assets/56b234c2-6d23-4f10-a161-3421e09d616a)<br><br>**3: Bookie - 책 추천 서비스** <br><br>설명: 챗봇(Bookie)을 통한 맞춤형 도서 추천 기능의 시퀀스를 나타냅니다.<br>주요 흐름:<br>사용자 질문 입력 → 백엔드로 전달<br>백엔드가 질문을 MySQL → GPT-4 → Chroma DB 순으로 처리<br>최적 추천 결과 도출 후 사용자에게 응답 전달<br><br>![image](https://github.com/user-attachments/assets/d2cabac8-f326-406c-b286-05b3ab030135)<br><br>**4: BookSnap - 책 리뷰 등록**<br><br>설명: 사용자가 읽은 책 리뷰 등록 과정을 나타냅니다.<br>주요 흐름:<br>사용자가 책 검색<br>백엔드에서 검색어를 통해 책 검색 후 정보 전달<br>사용자가 책 선택<br>선택된 책의 데이터와 리뷰 데이터 입력한 후 백엔드에서 디비에 저장시킴<br><br>![image](https://github.com/user-attachments/assets/c4da270f-b08f-46f0-a688-a9433c812d38)<br><br>**5: BookSnap - 책 리뷰 조회**<br><br>설명: 여러 사용자가 남긴 책 리뷰를 조회하는 과정을 나타냅니다.<br>주요 흐름:<br>사용자가 정렬 선택<br>선택된 정렬에 따라 백엔드에서 Redis에 순서 가져옴 -> 가져온 순서대로 리뷰 데이터 정렬 후 응답함<br><br>**3. ER 다이어그램**<br>이 E-R 다이어그램은 서점ZIP 서비스에서 사용자와 관련된 데이터, 책에 대한 데이터와 출판물 리뷰에 대한 데이터를 비롯해 챗봇과 사용자의 대화기록 저장과 관련된 데이터를 관리하기 위한 테이블 구조를 나타낸 것이다. 이미지 아래에 이어지는 설명은 테이블들 간의 관계와 각 테이블에 저장되는 속성들이 무엇인지에 대한 내용이다.<br> ![image](https://github.com/user-attachments/assets/fdeb277a-44fc-4c9f-ba2a-63b37e108b5f)<br><br>- **Member** 테이블<br>**설명:** 사용자의 기본 정보를 저장하는 테이블이다. 이 테이블에서는 사용자의 이메일, 패스워드, 가입 방법, 닉네임과 같은 기본 회원 정보를 담고 있다.<br>**주요 필드:** <br>`email`, `password` : 사용자의 이메일, 패스워드<br>`join_type` : 기본 로그인의 경우, ORIGIN / 카카오 소셜 로그인의 경우 KAKAO<br>`created_at`, `updated_at`: 계정 생성 및 수정 시간<br>`temp_password`: 임시 비밀번호 여부<br><br>- **PickedBook** 테이블<br>**설명:** 사용자가 찜한 도서(독립/상업)를 저장하는 테이블입니다.<br>**주요 필드:**<br>`id`: 찜 ID<br>`created_at`: 생성 시간<br>`member_id`: 찜한 회원 ID<br>`book_id`: 찜한 도서 ID<br><br>- **BookieChat** 테이블 <br>**설명:** 챗봇(Bookie)과 사용자 간의 대화 기록을 저장하는 테이블입니다.<br>**주요 필드:**<br>`user_message`: 사용자가 보낸 메시지<br>`bookie_response`: 챗봇이 응답한 내용<br>`created_at`: 대화가 생성된 시간<br>`member_id`: 이 대화를 남긴 사용자 ID (Member 테이블과 연결, N:1 관계)<br><br>- **BookstoreReview** 테이블<br>**설명:** 사용자들이 독립서점에 남긴 리뷰 정보입니다.<br>**주요 필드:** <br>`bookstorereview_id`: 서점 리뷰 ID<br>`rating`, `text`, `image_url`: 별점, 리뷰 내용, 이미지<br>`created_at`: 작성 시간<br>`member_id`: 작성자 ID (Member와 연결됨)<br>`bookstore_id`: 리뷰 대상 서점 ID (Bookstores와 연결됨)<br><br>- **bookstores**  테이블<br>**설명:** 등록된 독립서점 정보를 저장하는 테이블입니다.<br>**주요 필드:** <br>`bookstore_id`: 서점 ID<br>`name`, `address`, `hours`, `description`, `keyword`: 이름, 주소, 운영 시간, 설명, 키워드<br>`latitude`, `longitude`: 위치 좌표<br>`phone`: 전화번호<br>`rating`: 평균 별점<br><br>- **BookstoreIndepBook** 테이블<br>**설명:** 특정 서점에 어떤 독립서적이 있는지를 나타내는 매핑 테이블입니다.<br>**주요 필드:**<br>`bookstore_id`: 서점 ID<br>`indepbook_id`: 독립서적 ID (IndepBooks와 연결됨)<br><br>- **IndepBooks** 테이블<br>**설명:** 등록된 독립출판물(인디북) 정보를 저장합니다.<br>**주요 필드:**<br>`indepbook_id`: 독립서적 ID<br>`author`, `book_name`, `book_image_url`, `book_content`, `publisher`: 저자, 책 이름, 이미지, 내용, 출판사<br><br>- **Books** 테이블<br>**설명:** 일반 상업 출판물 정보를 저장합니다.<br>**주요 필드:**<br>`book_id`: 도서 ID<br>`author`, `book_name`, `book_image_url`, `book_content`, `publisher`: 저자, 책 이름, 이미지, 내용, 출판사<br><br>- **BookReview**  테이블<br>**설명:** 사용자들이 책(상업/독립)에 남긴 리뷰 정보를 저장합니다.<br>**주요 필드:**<br>`bookreview_id`: 리뷰 ID<br>`book_rating`: 별점<br>`bookreview_text`: 리뷰 내용<br>`created_at`, `updated_at`: 작성 및 수정 시간<br>`member_id`: 작성자 ID<br>`book_id`, `indepbook_id`: 리뷰 대상 도서 ID (Books 또는 IndepBooks)<br><br>- **BookReviewLikes** 테이블<br>**설명:** 사용자가 도서 리뷰에 남긴 좋아요를 저장하는 테이블입니다.<br>**주요 필드:**<br>- `id`: 좋아요 ID<br>- `created_at`: 좋아요 누른 시간<br>- `member_id`: 좋아요 누른 사용자<br>- `bookreview_id`: 대상 리뷰 ID (BookReview와 연결됨)<br> |
| (2) 전체 시스템 구성 |‘ 서점 ZIP가기’ 웹 서비스의 전체 SW 구조는 다음 그림과 같다. 그림 하단에 이어지는 내용에서는, 전체 SW 구조를 나눈 4가지 모듈에 대한 설명, 4가지 모듈을 다시 나눈 서브모듈에 대한 설명, 서브모듈 간 데이터의 흐름에 대한 설명 순으로 ‘서점 ZIP가기’의 SW 구조에 대해 기술하고자 한다.<br>![SystemArchitecture](https://github.com/user-attachments/assets/da14daa5-ba8e-4b86-a41a-5898f00cd943)<br> 서점 ZIP가기 웹 서비스의 전체 SW 구조는 우선 크게 **세 단위**로 나뉜다. 이를 **모듈 1, 2, 3, 4**라고 칭하였다. 각 모듈은 다시 **작은 단위** 로 나눌 수 있다. 이를 **서브모듈 1-1, 1-2, …**라고 칭하였다. _(각 모듈과 서브모듈의 구현방식에 대한 보다 자세한 설명은 다음 항목인 (3) 주요엔진 및 기능 설계에서 이어질 예정이다.)_ <br> <br>**[모듈]** <br> 모듈 1, 2, 3, 4은 아래와 같이 나뉜다.<br><br>- **모듈 1: Frontend**<br>사용자 인터페이스를 담당하는 모듈로, 유저와 직접 상호작용하는 역할을 한다. 리뷰 작성, 챗봇 사용, 책/서점 탐색 등 주요 기능을 시각적으로 제공하며, 사용자 입력을 처리하고 이를 서버에 전달한다.<br><br>- **모듈 2: Backend**<br>서버 측 로직을 담당하며, 데이터베이스와의 연결을 통해 사용자, 책, 서점 등의 정보를 저장하고 관리하는 역할을 한다. 또한, 프론트엔드와 AI 서버, 외부 API 간의 중간 다리 역할을 하여 요청과 응답을 중계한다.<br><br>- **모듈 3: 외부 API**<br>외부 서비스와 연결되는 모듈로, 다양한 외부 API들을 활용하여 정보를 받아오는 역할을 한다. 예를 들어, 지도 API를 통해 서점 위치를 마커로 시각화하거나, 출판물 정보를 검색하거나, 이미지 업로드를 처리한다.<br><br>- **모듈 3: AI 서버**<br>사용자 맞춤 추천 기능을 담당하는 모듈이다. 사용자의 리뷰를 기반으로 성향을 분석하고, 책 정보를 벡터화해 유사한 책을 추천하며, 추천 결과에 대한 설명을 자연어로 생성하는 역할을 한다.<br><br>**[서브모듈]**<br>앞서 설명한 **모듈 1**은 다시 아래와 같이 나뉜다.<br><br>- **서브모듈 1-1: 출판물에 대한 리뷰 등록 및 확인 기능**<br>출판물에 대한 사용자 리뷰 등록 및 확인 기능과 관련된 UI 및 HTTP 통신을 담당하는 서브모듈이다. 이 서브모듈은 사용자가 작성한 독립출판물 정보 및 출판물들에 대한 리뷰를 입력받아 서버에 전송하고, 서버로부터 받은 기존 리뷰 데이터를 다양한 정렬 기준에 따라 화면에 출력하는 역할을 수행한다.<br><br>- **서브모듈 1-2: 독립 서점 검색 및 확인 기능**<br>독립 서점 검색 및 확인 기능과 관련된 UI 및 HTTP 통신을 담당하는 서브모듈이다. 이 서브모듈은 사용자의 현재 위치를 기반으로 주변 독립 서점을 조회하고, 지도 상에 마커로 시각화하여 표시하는 역할을 수행한다. 또한, 가까운 순·좋아요 순 등 다양한 기준으로 서점을 정렬하여 목록으로 제공하며, 선택된 서점에 대해 운영 시간, 태그, 보유 도서 등의 상세 정보를 백엔드에서 받아와 화면에 출력한다.<br><br>- **서브모듈 1-3: 독립출판물 추천 채팅 기능**<br>사용자 맞춤형 독립출판물 추천과 관련된 채팅 UI 및 HTTP 통신을 담당하는 서브모듈이다. 이 서브모듈은 사용자의 입력을 채팅 형태로 수집하고, 이를 HTTP 요청 형식에 맞게 변환하여 AI 서버에 전달한다. 이후 AI 서버로부터 받은 추천 결과를 자연어 응답 형태로 화면에 출력한다.<br><br>앞서 설명한 **모듈 2**는 다시 아래와 같이 나뉜다.<br><br>- **서브모듈 2-1: Springboot 서버**<br>Springboot 환경의 어플리케이션이 Amazon EC2 인스턴스에서 실행되고 있는 서브모듈이다. 이 서브모듈은 사용자의 dietary restriction 정보나 메뉴 북마크 및 별점 정보에 대한 저장, 조회, 수정, 삭제 요청이 들어오면, 요청의 내용에 맞게 MySQL 데이터베이스에 접근하는 역할을 담당한다.<br><br>- **서브모듈 2-2: MySQL 데이터베이스**<br>MySQL 데이터베이스가 Amazon RDS 인스턴스에 저장되어있는 서브모듈이다. 이 서브모듈은 관계형 데이터베이스의 형식으로 데이터를 저장하는 저장공간의 역할을 담당한다.<br><br>- **서브모듈 2-3 : Redis 데이터베이스**<br>Redis 데이터베이스가 Amazon RDS 인스턴스에 저장되어있는 서브모듈이다. 이 서브모듈은 임시적이지만 빈번하게 조회되는 데이터를 인메모리 기반으로 저장하여, 빠른 응답 속도로 제공하는 역할을 담당한다.<br><br>앞서 설명한 **모듈 3**은 다시 아래와 같이 나뉜다.<br><br>- **서브모듈 3-1: Kakao map API**<br>사용자가 검색한 서점에 대한 시각화가 필요할 때, 프론트엔드 서브모듈 1-2와 백엔드 서브모듈 2-1의 요청에 의해 호출되는 서브모듈이다. 서브모듈 2-1(Spring Boot)은 사용자가 검색한 서점 이름을 기반으로 해당 서점의 주소 정보를 전달하고, 서브모듈 1-2는 이 주소 정보를 이용해 Kakao Map API를 호출하여 해당 위치에 마커를 표시한다. 즉, 전달받은 서점 이름을 기반으로 정보를 반환하고, 이를 지도에 시각적으로 표시하는 역할을 수행한다.<br><br>- **서브모듈 3-2: kakao 도서 API**<br>사용자가 검색한 도서에 대한 외부 정보를 조회할 때, 백엔드 서브모듈 2-1(Spring Boot)의 요청에 의해 호출되는 서브모듈이다. 도서 제목 등 검색어를 기반으로 Kakao 도서 API를 호출하고, 해당 도서의 저자, 출판사, 썸네일 등의 정보를 백엔드에 전달하는 역할을 수행한다.<br><br>- **서브모듈 3-3: Cloudinary**<br>사용자가 업로드한 이미지를 저장할 때 사용되는 외부 이미지 저장 API 모듈이다. 서브모듈 1-1, 1-2에서 전송된 이미지 파일을 백엔드 서브모듈 2-1(Spring Boot)이 받아 Cloudinary에 업로드하고, 반환된 이미지 URL을 다시 프론트엔드로 전달하여 클라이언트 화면에 표시하는 데 활용한다.<br><br>앞서 설명한 **모듈 4**은 다시 아래와 같이 나뉜다.<br><br>- **서브모듈 4-1: FastAPI 서버**<br>이 서브모듈은 Amazon EC2 인스턴스에서 실행되는 FastAPI 기반의 서버 모듈로, 추천 프로세스의 핵심 조율자 역할을 한다. 프론트엔드에서 전달된 사용자 메시지와 사용자 ID를 바탕으로, 서브모듈 4-3(ChromaDB)를 통해 유사한 도서를 탐색하고, 서브모듈 4-4(Reranker)를 통해 의미 기반으로 재정렬한 뒤, 최종적으로 서브모듈 4-2(GPT-4o)를 호출하여 자연어 응답을 생성한다. 외부 추천 처리 모듈을 순차적으로 호출하고 응답을 통합하여, 서브모듈 3-1(SpringBoot 서버)에 결과를 반환하는 기능을 담당한다.<br><br>- **서브모듈 4-2: GPT-4o**<br>이 서브모듈은 서브모듈 4-1(FastAPI)에 의해 호출되며, 사용자 메시지와 추천 도서 리스트를 입력받아 자연어 응답 문장을 생성한다. 입력된 메시지의 의도와 도서 리스트 간의 맥락을 고려하여 친숙하고 설득력 있는 문장을 생성하며, 사용자의 성향과 추천 맥락에 부합하는 설명을 제공한다.<br><br>- **서브모듈 4-3: ChromaDB**<br>이 서브모듈은 서브모듈 4-1(FastAPI)의 요청에 따라 사용자 성향 벡터와 데이터베이스에 저장된 독립출판물 임베딩 벡터 간의 유사도를 계산한다. 이를 통해 가장 유사한 도서 10권을 선정하여 FastAPI에 반환하며, 추천 후보 생성 단계의 핵심 역할을 수행한다.<br><br>- **서브모듈 4-4: Reranker**<br>이 서브모듈은 서브모듈 4-1(FastAPI)로부터 전달된 도서 추천 후보 리스트와 사용자 메시지를 기반으로, 의미적 연관성과 문맥적 적합도를 기준으로 리스트를 재정렬한다. 정렬된 결과는 다시 서브모듈 3-1(FastAPI)로 전달되며, 이후 서브모듈 4-2(GPT-4o)의 자연어 응답 생성을 위한 입력으로 활용된다.<br><br>[서브모듈 간 데이터의 흐름]<br><br>기능 Ⓐ (기성출판물 및 독립출판물에 대한 리뷰 등록 및 확인 기능)에서의 데이터 흐름<br>![기능 A](https://github.com/user-attachments/assets/bed3559e-6234-4829-8581-30f23307611b)<br><br> **(1) User → Frontend**<br>사용자는 출판물에 대한 리뷰를 작성하기 위해 UI 내 검색 창에서 쓰고자 하는 출판물이 독립출판물인지, 기성출판물인지 선택 후 출판물 제목 및 작가 이름으로 검색한다.<br><br>**(2) Frontend → Springboot 서버**<br>http 통신을 통해, 출판물의 종류(독립출판물, 기성출판물)과 함께 출판물 제목 혹은 작가 이름을 Spring Boot 서버에 전달한다.<br><br> **(3-1) Springboot 서버 → Kakao 도서 API**<br>출판물의 종류가 기성출판물이라면, Kakao 도서 API를 통해 해당 도서에 대한 책 정보 목록을 Http통신을 통해 JSON 형태로 가져오고, 해당 데이터 중 isbn 코드, 책 제목, 작가, 표지 이미지만 추출하여 다시 JSON 형태로 만든다.<br><br> **(3-2) Springboot 서버 → MySQL 데이터베이스**<br>사용자가 검색한 Spring Boot에서 JPA를 이용하여 MySQL 데이터베이스에 저장된 독립출판물의 제목이나 작가에 검색한 내용이 포함되어 있는지 확인 후, 포함되어 있을 경우에 책 정보 목록(책 제목, 작가, 표지 이미지)를 가져온다.<br><br> **(4) Springboot 서버 → Frontend**<br>검색한 책 정보 목록(isbn 코드 혹은 MySQL의 책 테이블 내 PK, 책 제목, 작가, 표지 이미지)를 json 형태로 프론트엔드에 전달한다.<br><br> **(5) Frontend → User**<br>Springboot 서버로부터 받은 책 정보 목록을 가독성 있게  UI 상에 보여주어 사용자가 확인할 수 있게 한다.<br><br> **(5-1) User → Frontend**<br>사용자는 UI 상에 있는 책 목록 중에서 리뷰 쓰기를 원하는 책을 선택하여, 해당 책에 대한 별점, 한 줄 리뷰 텍스트를 입력한다.<br><br> **(5-2) User → Frontend**<br>사용자가 독립출판물을 선택했을 때, UI 상에 있는 책 목록 중에서 리뷰 쓰기를 원하는 책이 없거나, 검색 결과가 없을 경우에는 ‘직접 독립출판물 등록’를 선택한다. 이 때, 사용자는 책 표지와 작가 이름, 책 이름, 해당 책에 대한 별점, 한 줄 리뷰 텍스트를 입력한다.<br><br> **(6) Frontend → Springboot 서버**<br>사용자가 UI 상에 입력한 책 리뷰 데이터를 JSON 형태로 Springboot 서버에 전달한다. (단, 기성출판물 리뷰의 경우에는 isbn코드도 함께 전달한다.)<br><br> **(7-1) Springboot 서버 → MySQL 데이터베이스** <br>기성 출판물에 대한 리뷰 데이터를 받았을 경우에는 전달받은 isbn 코드를 이용하여 다시 한 번 kakao 도서 API 호출을 통해, 책 이미지, 책의 작가, 책 제목, 책의 줄거리를 책 테이블에 저장한 후, 책 리뷰 테이블에 해당하는 책 리뷰 데이터(별점, 리뷰 텍스트)를 저장한다.<br><br>**(7-2-1) Springboot 서버 ↔ Cloudinary** <br> 새로 등록하고자 하는 독립출판물의 경우에는 책 이미지를 Cloudinary api를 이용해 멀티폼데이터로 받은 이미지를 클라우드에 저장하고 cloudinary는 저장된 이미지 url를 제공한다.<br><br>**(7-2-2) Springboot 서버 ↔ MySQL 데이터베이스** <br>독립 출판물에 대한 리뷰 데이터를 받았을 경우에는, 기존에 이미 등록된 책은 책 리뷰 테이블에 해당되는 책 리뷰 데이터를 저장하고 새로 등록하고자 하는 독립출판물의 경우에는 cloudinary를 통해 제공된책 이미지 url, 책 제목, 작가를 책 테이블에 저장 후 책 리뷰 테이블에 리뷰 데이터를 저장한다.<br><br>**(7-3)  Springboot 서버 → FAST API → GPT-4o** <br>출판물 리뷰에 대한 데이터를 사용자 프로파일링을 위해 FAST API를 거쳐 GPT-4o에 전달한다.<br><br>**(8) Springboot 서버 → Frontend** <br>책 리뷰 저장이 완료되었을 경우에는 Http code를 통해 프론트엔드에 성공적으로 처리되었음을 알려준다.<br><br>**(9) Frontend → User** <br>프론트엔드에서는 성공적으로 리뷰 저장이 처리되었음을 알려주고자 책 리뷰를 볼 수 있는 메인 페이지로 이동한다.<br><br>**(10) User → Frontend** <br>사용자가 메인페이지로 이동하여 리뷰를 확인할 때, UI 상의 정렬(최신순, 좋아요순, 요즘 인기있는 순) 메뉴를 선택한다.<br><br>**(11) Frontend → Springboot 서버** <br>프론트엔드에서는 사용자가 선택한 정렬(최신순, 좋아요순, 요즘 인기있는 순)로 책 리뷰 목록을 REST API로 요청한다.<br><br>**(12) Springboot 서버 ↔ Redis 데이터베이스** <br>Springboot에서는 사용자가 선택한 정렬이 좋아요순, 요즘 인기있는 순인 경우에 Redis ZSet에서 이미 정렬된 책 리뷰 id 목록을 조회한다.<br><br>**(13) Springboot 서버 ↔ MySQL 데이터베이스** <br>Springboot는 좋아요순, 요즘 인기있는 순인 경우에는 이미 정렬된 책 리뷰 아이디 순서에 맞추어 책 리뷰 목록을 MySQL에서 조회하고, 최신순인 경우에는 JPQL 쿼리를 통해 조회하여 조회한 데이터를 JSON 형태로 만든다.<br><br>**(14) Springboot 서버 → Frontend** <br>JSON 형태의 책 리뷰 데이터를 프론트엔드에 전달한다.<br><br>**(15) Frontend → User**<br>전달된 책 리뷰 데이터 목록은 UI 내에 가독성 있게 보인다.<br><br>**기능 Ⓑ(독립 서점 검색 및 확인 기능)에서의 데이터 흐름**<br><br>![기능 B](https://github.com/user-attachments/assets/7285eb27-f79d-4b05-bfdd-75980fca441f)<br><br>**(1) User → Frontend**<br>사용자가 UI에서 검색 조건(예: 위치, 키워드 등)을 입력하여 독립 서점을 검색한다.<br><br>**(2) Frontend → Springboot 서버**<br>입력한 검색 조건과 사용자의 현재 위치 정보를 포함하여, HTTP 요청으로 Spring Boot 서버에 전달한다.<br><br>**(3-1) Springboot 서버 → MySQL 데이터베이스**<br>MySQL에서 저장된 서점 정보와 사용자 리뷰를 조회하거나 새롭게 작성된 리뷰 및 제보 독립서점 정보 등을 저장한다.<br><br>**(3-2) Springboot 서버 → Redis 데이터베이스**<br>Redis에서 인기 서점 목록, 사용자별 좋아요 여부 등의 임시 데이터를 조회하거나, 좋아요 생성/삭제 요청을 처리한다.<br><br>**(4) Springboot 서버 → Frontend**<br>MySQL과 Redis에서 조회한 서점 정보(예: 검색 결과 목록, 좋아요 수, 상세 리뷰 등)를 통합하여, JSON 형태로 Frontend에 응답한다.<br><br>**(5) Frontend → User** <br>Frontend는 받은 데이터를 지도에 시각화하고, 서점 상세 정보와 위치를 사용자에게 제공한다.<br><br>**기능 Ⓒ (독립출판물 추천 채팅 기능)에서의 데이터 흐름**<br><br>![시스템 아키텍처](https://github.com/user-attachments/assets/276259d1-e3e7-44ff-84fb-4b0e64d14029)<br><br>**1) User → Frontend** <br>사용자가 챗봇 UI에 자연어로 입력(예: "힐링되는 책 추천해줘")을 입력한다.<br><br>**(2) Frontend → SpringBoot 서버** <br>HTTP 통신을 통해 사용자의 메시지를 SpringBoot 서버로 전송한다.<br><br>**(3) SpringBoot 서버 → FastAPI 서버** <br>SpringBoot 서버는 해당 메시지를 FastAPI 서버로 전달한다. (사용자 ID 등 부가 정보도 함께 포함)<br><br>**(4) FastAPI 서버 → ChromaDB** <br>FastAPI 서버는 사용자 ID에 해당하는 성향 벡터를 ChromaDB에서 조회한 후, 해당 벡터를 기준으로 유사한 책 벡터 Top-10을 검색한다.<br><br>**(5) FastAPI 서버 → Reranker**<br>FastAPI는 ChromaDB에서 받은 도서 리스트를 Reranker에 전달하여, 의미 기반으로 추천 순서를 재정렬한다.<br><br>**(6) FastAPI 서버 → GPT-4o** <br>Reranker 결과와 사용자 메시지를 기반으로 GPT-4o를 호출하여, 자연스러운 문장 형태의 책 추천 응답을 생성한다.<br><br>**(7) FastAPI 서버 → SpringBoot 서버** <br>FastAPI는 생성된 자연어 응답 문장과 추천 도서 리스트를 SpringBoot 서버로 반환한다.<br><br>**(8) SpringBoot 서버 → DB / Kakao 도서 API** <br>SpringBoot 서버는 추천 도서 제목을 기반으로 자체 DB 또는 Kakao 도서 API에 요청을 보내 책의 상세 정보(표지, 저자, 출판일, 설명 등)를 조회한다.<br><br>**(9) SpringBoot 서버 → Frontend**<br>SpringBoot 서버는 조회된 책 상세 정보와 GPT-4o의 자연어 응답 메시지를 함께 프론트엔드에 전달한다. 사용자는 챗봇 UI를 통해 자연어 기반 추천 메시지와 책 리스트를 확인할 수 있다.<br><br> |
| (3) 주요엔진 및 기능 설계 | 이 항목에서는 앞서 설명한 기준으로 구분된 모듈1, 모듈2, 모듈3, 모듈 4 각각의 **구현 내용 및 방법**에 대해 설명하고자 한다. 또한, 각 모듈의 구현에 대해 기술할 때, 모듈이 받는 **input**, 모듈의 **내부 로직**, 모듈이 내보내는 **output**의 3가지 관점으로 나누어 서술하고자 한다.<br><br>**1. 모듈1-Frontend의 구현 내용 및 방법**<br><br>**[서브모듈 1-1 : 독립출판물에 대한 리뷰 등록 및 확인 기능]**<br><br>**`input`:**<br>사용자가 UI를 통해 특정 독립출판물에 대한 리뷰 내용을 입력한다. 입력 항목은 리뷰 텍스트, 평점, 닉네임 등이 포함된다. 만약, 서적이 없다면 책 정보를 직접 입력 후 리뷰를 작성할 수 있다. 또한, 사용자는 리뷰 목록을 정렬하거나 필터링하기 위한 정렬 기준(예: 최신순, 인기순, 좋아요순)을 선택할 수 있다.<br><br>**`내부 로직`:**<br>입력된 리뷰 정보는 JSON 형식으로 변환되어 HTTP POST 요청을 통해 서버(SpringBoot)로 전송된다. 서버에서 리뷰 저장을 완료한 후, 클라이언트는 해당 도서에 대한 전체 리뷰 목록을 HTTP GET 요청으로 받아온다. 받아온 리뷰 목록은 정렬 기준에 따라 클라이언트 측에서 가공되며, 정렬 기준이 변경될 때마다 상태가 업데이트되어 리스트가 다시 렌더링된다.<br><br>**`output`:**<br>사용자가 작성한 리뷰는 서버에 저장되며, 이후 북스냅 페이지에서 다른 사용자들과 함께 조회할 수 있다. 정렬 기준에 따라 리뷰가 순서대로 표시되며, 사용자 친화적인 UI(별점, 닉네임, 날짜 등)로 시각화된다.<br><br>**[서브모듈 1-2 : 독립 서점 검색 및 확인 기능]**<br><br>**`input`:**<br>사용자가 위치 기반 서비스를 허용 후, 서점 이름을 입력한다. 정렬 기준(가까운 순, 좋아요 순 등)이나 필터(태그, 지역 등)를 선택할 수 있으며, 사용자가 특정 서점을 클릭하면 해당 서점의 상세 정보를 요청한다.<br><br>**`내부 로직` :**<br>사용자의 현재 위치(GPS 또는 수동 입력)를 기준으로 HTTP GET 요청을 서버(SpringBoot)로 보내 주변 독립 서점 리스트를 요청한다. 서버로부터 받은 서점 데이터를 지도 API와 연동하여 지도 위에 마커 형태로 시각화한다.리스트는 가까운 순, 좋아요 순 등의 정렬 기준에 따라 클라이언트에서 정렬되며, 선택된 기준에 따라 다시 렌더링된다. 사용자가 특정 서점을 선택하면 해당 서점의 상세 정보를 서버에 요청하고, 서버로부터 운영 시간, 보유 도서, 리뷰 등의 정보를 받아온다.<br><br>**`output`:**<br>지도 화면에 주변 독립 서점이 마커 형태로 시각화되어 표시된다. 바텀 시트에는 정렬 기준에 따라 정렬된 서점 리스트가 제공된다. 특정 서점을 클릭하면 그에 대한 상세 정보(운영 시간, 보유 도서, 태그, 리뷰 등)가 화면에 출력되며, 사용자에게 해당 서점에 대한 직관적인 정보를 제공한다.<br><br>**[서브모듈 1-3 : 독립출판물 추천 채팅 기능]**<br><br>**`input`:**<br>사용자가 챗봇 UI에 자연어로 독립출판물 추천 요청을 입력한다. 예: “힐링되는 책 추천해줘”, “요즘 잘 팔리는 에세이 뭐 있어?”<br><br>**`내부 로직`:**<br>사용자가 챗봇 UI에 입력한 자연어 메시지를 채팅 기록에 추가하고, 해당 메시지를 사용자 ID 등의 부가 정보와 함께 JSON 형식으로 변환하여 SpringBoot 서버로 HTTP 요청을 전송한다. 이후 서버로부터 전달받은 추천 결과(JSON 응답)를 파싱하여, 응답 메시지와 추천 도서 데이터를 상태로 저장한다. 이후 이 상태값을 기반으로 UI 컴포넌트들이 반응형으로 업데이트되도록 처리한다.<br><br>**`output`:**<br>사용자의 요청에 대한 자연어 응답 메시지가 출력된다. 함께 추천된 책 리스트는 카드 형태 등으로 챗봇 UI 내에 표시되며, 사용자는 클릭을 통해 해당 도서 상세 페이지로 이동할 수 있다. 이전 대화 내용과 함께 누적된 채팅 형태로 표현되며, 사용자에게 친밀하고 대화 기반의 추천 경험을 제공한다.<br><br>**2. 모듈2-DB서버의 구현 내용 및 방법**<br><br>**[서브모듈 2-1 : Springboot 서버]**<br><br>**`input`:**<br>프론트엔드(모듈1)로부터 http 요청이 들어온다.<br><br>**`내부로직`:**<br>들어온 http 요청의 종류와 내용에 따라, 응답을 제공하기 위한 로직을 수행한다. 서점 정보, 사용자 리뷰 등과 같은 핵심 데이터에 대해서는, 해당 요청에 맞는 MySQL 쿼리를 생성하여 MySQL 데이터베이스 (서브모듈 2-2)에 전송하고 결과를 받는다. 인기 서점 목록, 좋아요 여부 등과 같은 임시 데이터에 대해서는, Redis 쿼리를 생성하여 Redis 데이터베이스 (서브모듈 2-3)에 전송하고 결과를 받는다. 각 결과들을 통합해 http 응답 형식으로 변환한다.<br><br>**`output`:**<br>프론트엔드(모듈1)에게 http 응답을 전송한다.<br><br>**[서브모듈 2-2 : MySQL 데이터베이스]**<br><br>**`input`:**<br>Springboot 서버(서브모듈 2-1)로부터 조회, 저장, 수정, 삭제 쿼리(MySQL)가 요청된다.<br><br>**`내부로직`:**<br>요청한 쿼리에 맞게 관계형 데이터베이스에 접근하여 데이터를 조회하거나 변경한다.<br><br>**`output`:**<br>쿼리를 수행한 결과를 Springboot 서버(서브모듈 2-1)에게 응답으로 보낸다.<br><br>**[서브모듈 2-3 : Redis 데이터베이스]**<br><br>**`input`:**<br>Springboot 서버(서브모듈 2-1)로부터 조회, 저장 쿼리가 요청된다.<br><br>**`내부로직`:**<br>요청된 키 기반 데이터에 대해 in-memory 접근 방식으로 빠르게 조회하거나 저장 작업을 수행한다.<br><br>**`output`:**<br>쿼리를 수행한 결과를 Springboot 서버(서브모듈 2-1)에게 응답으로 보낸다.<br><br>**3. 모듈3-외부 API의 사용 방법**<br><br>**[서브모듈 3-1 : kakao map API]**<br><br>**`input`:**<br>서브모듈 2-1(SpringBoot)에서 전달받은 서점의 주소 정보 또는 좌표 값, 또는 서브모듈 1-2(프론트엔드)에서 사용자의 검색 요청을 통해 전달된 서점 이름, 위치 정보 등이 입력된다. 입력 데이터는 Kakao Map API가 위치를 시각화하거나 검색 기능을 수행하는 데 필요한 형태로 전달된다.<br><br>**`내부로직`:**<br>전달받은 주소 또는 장소명을 기반으로 Kakao Map API의 지오코딩 또는 장소 검색 기능을 수행한다. 지오코딩 결과로 얻은 좌표 정보를 활용해 지도에 마커를 표시하고, 요청된 위치를 기준으로 지도 중심을 설정한다.<br><br>**`output`:**<br>마커가 표시된 Kakao 지도 화면이 생성되며, 사용자가 지정한 서점 정보가 시각적으로 지도에 반영된다.여러 개의 마커를 통해 주변 서점을 동시에 확인할 수 있으며, 지도 상의 시각적 요소(마커, 중심 좌표, 정보창 등)는요청에 따라 동적으로 렌더링되어 최종 사용자에게 제공된다.<br><br>**[서브모듈 3-2 : kakao 도서 API]**<br><br>**`input`:**<br>서브모듈 2-1(SpringBoot)로부터 전달된 도서 검색 요청 파라미터를 입력으로 받는다. 입력값은 도서 제목, 작가, isbn 등의 문자열이며, HTTP GET 방식의 API 호출을 통해 전달된다. 이 요청은 사용자가 프론트엔드에서 입력한 검색어를 기반으로 한다.<br><br>**`내부 로직`**<br>전달받은 검색어를 기준으로 Kakao 도서 API는 내부 도서 데이터베이스를 조회하고, 해당 조건에 부합하는 도서 정보를 탐색한다. 검색 결과는 기본적으로 관련도 순으로 정렬되며, 도서명, 저자, 출판사, 출판일, 썸네일 이미지 등의 필드를 포함한다. 요청 시 파라미터에 따라 검색 조건(정확도, 정렬 순서, 페이지 수 등)을 유연하게 처리하며, 응답 데이터는 JSON 포맷으로 구성된다.<br><br>**`output`:**<br>검색 결과에 해당하는 도서 정보가 JSON 형태로 반환된다. 반환 데이터는 백엔드(SpringBoot)에서 후속 가공을 거쳐 프론트엔드에 전달되며, 사용자는 이를 통해 도서 상세 정보를 확인할 수 있다. 결과에는 도서명, 저자, 출판사, 썸네일 등 주요 정보가 포함된다.<br><br>**[서브모듈 3-3 : Cloudinary]**<br><br>**`input`:**<br>서브모듈 2-1(SpringBoot)로부터 전달된 이미지 파일 데이터를 입력으로 받는다. 이 요청은 사용자(프론트엔드 서브모듈 1-1, 1-2)를 통해 업로드된 이미지이며, 주로 독립출판물 표지, 리뷰 이미지, 서점 관련 이미지 등이 포함된다. 전송 방식은 일반적으로 멀티파트 폼 데이터이며, Cloudinary 업로드 API에 HTTP POST 방식으로 전달된다.<br><br>**`내부 로직`**<br>Cloudinary는 전달받은 이미지 파일을 저장소에 업로드한 뒤, 고유한 URL을 생성하고 해당 리소스를 클라우드에 저장한다. 업로드 시 리사이징, 포맷 변환(WebP 등), 최적화 등의 옵션을 설정할 수 있으며, 설정된 정책에 따라 저장 경로, 퍼블릭 ID, 접근 제어 등이 적용된다. 모든 업로드 작업은 RESTful API를 통해 비동기적으로 처리된다.<br><br>**`output`:**<br>업로드 완료 후, 해당 이미지에 접근 가능한 고유 URL을 포함한 JSON 응답이 반환된다. 이 URL은 서브모듈 2-1(SpringBoot)을 거쳐 프론트엔드로 전달되며, 클라이언트 UI 상에서 이미지 미리보기, 리뷰 목록 이미지 출력, 서점 정보 표시 등에 활용된다.<br><br>**4. 모듈4-AI 서버의 구현 내용 및 방법**<br><br>**[서브모듈 4-1 : FastAPI 서버]**<br><br>**`input`:**<br>SpringBoot 서버로부터 전달된 사용자 메시지와 사용자 ID, 그리고 사용자 성향 벡터 조회 요청 등의 데이터를 입력으로 받는다. 이 요청은 프론트엔드에서 사용자가 입력한 자연어 메시지를 기반으로 구성되며, 추천을 위한 문맥 정보가 함께 포함될 수 있다.<br><br>**`내부로직`:**<br>FastAPI는 전달받은 사용자 ID를 기반으로 ChromaDB에서 사용자 성향 벡터를 조회하고, 이를 사용해 유사한 도서 벡터를 검색한다. 검색된 도서 리스트를 받아 정렬을 위해 Reranker에 전달하고, 정렬된 결과와 사용자 메시지를 함께 GPT-4o에 전달하여 자연어 응답 생성을 요청한다. FastAPI는 이 일련의 과정을 순차적으로 수행하며, 각 처리 결과를 통합하고 응답 데이터를 구성하여 반환할 준비를 마친다.<br><br>**`output`:**<br>GPT-4o로부터 생성된 자연어 응답 메시지와, 재정렬된 추천 도서 리스트(도서 ID, 제목 등 메타 정보 포함)를 JSON 형태로 SpringBoot 서버에 반환한다.<br><br>**[서브모듈 4-2 : GPT-4o]**<br><br>**`input`:**<br>FastAPI 서버(서브모듈 3-1)로부터 전달된 사용자 메시지, 사용자 성향 요약 정보, 추천된 도서 리스트 등을 입력으로 받는다. 입력 데이터는 자연어 처리에 필요한 문맥 정보를 포함하며, JSON 또는 프롬프트 문자열 형태로 전달된다.<br><br>**`내부 로직`**<br>입력받은 사용자 메시지와 추천 도서 정보를 바탕으로, 사용자의 관심사 및 대화 흐름에 맞는 자연스러운 채팅 응답을 생성한다. 경우에 따라, 추천 리스트의 의미적 정합성을 높이기 위해 서브모듈 3-4(Reranker)의 정렬 결과를 활용하거나, 요청에 포함된 사용자 성향 데이터를 바탕으로 내용을 보완한다. 응답 생성은 프롬프트 기반 언어 모델 처리 방식으로 이루어지며, 생성된 결과는 사용자 친화적이고 문맥에 적합한 자연어 형태로 구성된다.<br><br>**`output`:**<br>자연어로 구성된 추천 응답 메시지를 FastAPI 서버에 반환한다. <br><br>**[서브모듈 4-3 : ChromaDB]**<br><br>**`input`:**<br>FastAPI 서버(서브모듈 3-1)로부터 전달된 사용자 프로파일 벡터를 입력으로 받는다. 이 벡터는 사용자의 성향을 반영한 고차원 임베딩 값이며, 독립출판물 벡터들과의 유사도 비교를 위한 기준점으로 사용된다.<br><br>**`내부 로직`**<br>입력된 사용자 벡터와 ChromaDB에 저장된 독립출판물 임베딩 벡터 간의 코사인 유사도 또는 내적 연산을 수행하여, 가장 유사한 상위 N개의 도서를 탐색한다. <br><br>**`output`:**<br>유사도 기준으로 선정된 도서 리스트를 FastAPI 서버에 반환한다. 각 항목에는 도서의 고유 ID, 제목, 벡터 유사도 점수 등 메타 정보가 포함된다. 이 결과는 이후 Reranker 및 GPT-4o 모듈에서 활용된다.<br><br>**[서브모듈 4-4 : Reranker]**<br><br>**`input`:**<br>FastAPI 서버(서브모듈 3-1)로부터 전달된 도서 추천 후보 리스트와 사용자 메시지를 입력으로 받는다. 이 리스트는 ChromaDB(서브모듈 3-3)에서 유사도 기반으로 추출된 도서들로 구성되어 있으며, 각 도서에는 메타 정보(제목, 설명 등)가 포함될 수 있다.<br>**`내부로직`**<br>입력된 도서 리스트와 사용자 메시지를 분석하여, 의미적 관련도나 문맥 적합도 등을 기준으로 도서 순위를 재정렬한다. 이를 위해 도서 설명과 사용자 요청 간의 의미 유사도를 계산하거나, 사전학습된 의미 기반 모델 또는 랭킹 알고리즘을 활용할 수 있다. 단순 유사도 외에도 도서의 주제, 감성, 장르 등이 메시지 의도에 부합하는지를 반영하여 정밀하게 점수를 부여하고, 그에 따라 리스트를 재구성한다.<br>**`output`:**<br>의미 기반 정렬이 반영된 도서 리스트를 FastAPI 서버에 반환한다. |
| (4) 주요 기능의 구현 | 이 항목에서는 **핵심 기능 3가지**와 모듈 간의 연관성에 대해 설명하고자 한다. <*Project-Summary*> / *(5) 주요 기능 리스트*에 기술한 주요 기능 3가지의 구현에 각 모듈이 어떻게 연관되어있는지에 대해 서술하고자 한다.<br>**[기능Ⓐ 기성출판물 및 독립출판물 리뷰 등록 및 확인 기능]**<br><br>**기능Ⓐ에서 모듈1의 역할**<br>사용자가 리뷰를 남기고 싶은 출판물을 제목이나 작가 이름으로 검색할 수 있는 인터페이스를 제공한다. 사용자로부터 입력받은 검색어를 http 통신을 통해 Backend(모듈2)로 전송한다. Backend(모듈2)로부터 받은 출판물 목록을 JSON 형태로 전달받아 사용자가 선택할 수 있도록 UI 상에 보여준다. 사용자가 기존에 등록되지 않은 독립 출판물의 경우에는 선택한 도서에 대한 정보(표지 이미지, 작가, 책 이름)와 함께 리뷰 데이터(별점, 텍스트), 그외의 경우에는 도서 정보를 제외한 순수한 리뷰 데이터를 Backend(모듈2)로 http통신을 통해 전달한다. 리뷰 조회 시에는 정렬(최신순, 좋아요순, 요즘 인기있는 순)을 사용자로부터 UI 상 상단 메뉴 버튼을 통해 선택받을 수 있게 하고 Backend(모듈2)로부터 받은 리뷰 데이터를 보여준다.<br><br>**기능Ⓐ에서 모듈2의 역할**<br>Frontend(모듈1)에서 전달된 출판물 검색 요청을 받아, 기성출판물의 경우에는 카카오 도서 api를 통해 기성 출판물 데이터(표지 이미지, 출판사, 책이름, 저자, isbn 코드)를, 독립출판물의 경우에는 MySQL(서브모듈 2-2)에서 조회하여 독립출판물 데이터(표지, 이미지, 책이름, 저자, 책 아이디)를 전달한다. Frontend(모듈1)에서 전달된 출판물 리뷰 데이터를 가지고, 기성출판물의 경우에는 카카오 도서 api를 통해 기성 출판물 데이터를 조회하고 이를 MySQL(서브모듈 2-2)에 저장할 수 있게 저장 쿼리를 보낸다. 기존에 등록되지 않은 독립출판물의 경우에는 Cloudinary(서브모듈 3-3)를 통해 사용자가 업로드한 책 이미지 url을 제공받아 책 데이터를 저장할 수 있도록 MySQL(서브모듈 2-2)에 저장 쿼리를 보낸다. 이후에는 출판물의 종류에 상관없이 전달받은 JSON 형태의 리뷰데이터(별점, 리뷰 텍스트)를 저장할 수 있도록 MySQL(서브모듈 2-2)에 저장 쿼리를 보낸다. 출판물 조회 시에는 Redis(서브모듈 2-3)에서 출판물 데이터의 정렬 순서를 가지고 와서 MySQL(서브모듈 2-2)에서 출판물 데이터를 순서에 맞게 JSON 형태로 가공하여 Frontend(모듈1)에 전달한다.<br><br>**기능Ⓐ에서 모듈3의 역할**<br>Kakao 도서 api(서브모듈 3-2) : 기성출판물의 조회하는 과정에서 책 제목, 저자 이름을 통해 관련도순에 맞추어 검색 결과를 제공한다. 기성출판물 리뷰를 저장하는 과정에서는 기성출판물의 데이터(책 이미지, 책 이름, 책 소개, 저자)를 제공한다.<br>Cloudinary(서브모듈 3-3) : 독립출판물을 새로 등록하는 과정 중 Backend(모듈2)에서 사용자가 업로드한 책 이미지를 이용해 해당 이미지 url을 제공한다.<br><br>**기능Ⓐ에서 모듈4의 역할**<br>Backend(모듈2)에서 출판물의 리뷰 저장 시, 해당 데이터를 FAST API를 거쳐 GPT 4-o에 사용자 프로파일링을 통해 저장한다.<br><br>**[기능Ⓑ 독립 서점 검색 및 확인 기능]**<br><br>**기능Ⓑ에서 모듈1의 역할**<br>사용자가 지도 UI에서 주변 독립서점을 검색하거나 특정 서점의 상세 정보를 요청할 수 있도록 인터페이스를 제공한다.사용자의 위치 정보, 검색 조건 등을 입력받아 JSON 형태로 Backend(모듈2)로 전송한다.  Backend(모듈2)로부터 받은 서점 리스트, 상세 정보, 지도 마커 데이터를 시각적으로 지도에 표시하고, 서점 상세 정보(리뷰 등)를 UI에 출력한다.<br><br>**기능Ⓑ에서 모듈2의 역할**<br>Frontend(모듈1)에서 전달된 검색 요청을 받아, 필요한 데이터를 MySQL(서브모듈 2-2)과 Redis(서브모듈 2-3)에서 조회한다. MySQL에서는 서점의 상세 정보, 사용자 리뷰, 제보된 독립서점 정보를 조회하며 Redis에서는 인기 있는 서점 목록 등 임시 데이터를 조회하거나 갱신한다. 취합된 결과를 프론트엔드에 JSON으로 응답한다.<br><br>**기능Ⓑ에서 모듈3의 역할**<br>Kakaomap API(서브모듈 3-1)를 통해 서점의 위치, 상세 정보, 지도 마커 데이터를 조회한다. Cloudinary(서브모듈 3-3)를 통해 사용자가 업로드한 서점 사진을 저장하고, 사진 URL을 Backend(모듈2)에 제공한다.<br><br>**[기능Ⓒ 독립출판물 추천 채팅 기능]**<br><br>**기능Ⓒ에서 모듈1의 역할**<br>사용자는 모듈1의 챗봇 UI를 통해 자연어로 도서 추천 요청을 입력한다. 입력된 메시지는 사용자 ID 등의 부가 정보와 함께 JSON 형식으로 변환되어 모듈2로 전송된다. 추천 결과를 포함한 자연어 응답과 도서 리스트를 수신하면, 이를 상태에 반영하여 UI에 출력한다. 응답 메시지 및 추천 도서는 챗봇 대화 형태로 렌더링되며, 각 도서는 카드 형식으로 구성되어 있다.<br><br>**기능Ⓒ에서 모듈2의 역할**<br>모듈1로부터 전달된 메시지를 FastAPI 서버(모듈4)로 전달한다. 추천 결과 수신 후, 각 도서 제목을 기반으로 DB 또는 외부 도서 API(모듈3)를 통해 상세 정보를 조회한다. 조회된 상세 정보를 모듈1로 다시 전달하여 UI에 출력할 수 있도록 지원한다.<br><br>**기능Ⓒ에서 모듈3의 역할**<br>모듈2에서 전달된 도서 제목을 기반으로 기존 출판물이면Kakao 도서 API(서브모듈 3-2)를 , 독립 출판물이면 mySQL DB(서브모듈 2-2)를 호출한다. API나 DB로부터 받아온 저자, 출판사, 출판일, 썸네일 이미지 등의 정보를 JSON 형태로 반환한다. 반환된 정보는 모듈2를 통해 프론트로 전달된다.<br><br>**기능Ⓒ에서 모듈4의 역할**<br>FastAPI 서버(서브모듈 4-1)는 사용자 메시지와 사용자 성향 벡터를 기반으로 ChromaDB(서브모듈 4-3)를 호출해 유사 도서를 탐색한다. 검색된 도서 리스트는 Reranker(서브모듈 4-4)를 통해 재정렬되며, 정렬된 결과와 사용자 메시지를 기반으로 GPT-4o(서브모듈 4-2)에서 자연어 응답을 생성한다. 응답 메시지와 추천 도서 리스트를 모듈2에 반환한다. |
| (5) 기타 | |

<br>
